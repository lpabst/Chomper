<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Chomper</title>
</head>

<body>
    <style>
        #gameCanvas {
            width: 1000px;
            height: 600px;
            background: black;
        }
    </style>

    <main>
        <canvas id='gameCanvas'></canvas>
    </main>

    <script>
        // GAME SCRIPT
        var Game = {
            init: function () {
                var canvas = document.getElementById('gameCanvas');
                var ctx = canvas.getContext('2d')
                // var bgCanvas = document.getElementById('bgCanvas');

                // var canvas = {
                //     bgCanvas: bgCanvas,
                //     fgCanvas: fgCanvas,
                //     bgCtx: bgCanvas.getContext('2d'),
                //     fgCtx: fgCanvas.getContext('2d'),
                // }

                // var spriteSheet = new Image();
                // var backgroundSprite = new Image();
                // var coinSprite = new Image();

                // spriteSheet.src = 'img/spriteSheet.png';
                // backgroundSprite.src = 'img/background.png';
                // coinSprite.src = 'img/coin.png';

                // var spriteSheetLoaded = false;
                // var backgroundSpriteLoaded = false;
                // var coinSpriteLoaded = false;

                // spriteSheet.addEventListener('load', function () {
                //     spriteSheetLoaded = true;
                //     imagesLoaded();
                // });
                // backgroundSprite.addEventListener('load', function () {
                //     backgroundSpriteLoaded = true;
                //     imagesLoaded();
                // });
                // backgroundSprite.addEventListener('load', function () {
                //     coinSpriteLoaded = true;
                //     imagesLoaded();
                // });

                var data = {
                    animationFrame: 0,
                    canvas: canvas
                }

                Game.run(data);

                // function imagesLoaded() {
                //     if (!spriteSheetLoaded || !backgroundSpriteLoaded || !coinSpriteLoaded) {
                //         return;
                //     }

                //     var data = {
                //         animationFrame: 0,
                //         // spriteSheet: spriteSheet,
                //         // backgroundSprite: backgroundSprite,
                //         // coinSprite: coinSprite,
                //         canvas: canvas
                //     }

                //     Input.init(data);
                //     Entities.init(data);
                //     Render.init(data);
                //     Game.run(data);
                // }
            },

            run: function (data) {
                var loop = function () {
                    Game.input(data);
                    Game.update(data);
                    Game.render(data);

                    data.animationFrame++;

                    window.requestAnimationFrame(loop);
                }

                loop();
            },

            input: function (data) {
                Input.update(data);
            },

            update: function (data) {
                Animation.update(data);
                Movement.update(data);
                Physics.update(data);
            },

            render: function (data) {
                Render.update(data);
            },
        }

        Game.init();





        const WALL = 'WALL';
        const PLAYER = 'PLAYER';
        const FOOD = 'FOOD';
        function Wall(x, y, w, h) {
            this.x = x;
            this.y = y;
            this.w = w;
            this.h = h;
            this.type = WALL;
            return this;
        }
        function Player() {
            this.x = 0;
            this.y = 0;
            this.xVel = 0;
            this.yVel = 0;
            this.type = PLAYER

            this.move = function () {
                this.x += this.xVel;
                this.y += this.yVel;
            }
        }
        function food(x, y, value) {
            this.x = x;
            this.y = y;
            this.value = value;
            this.type = FOOD;
        }
    </script>
</body>

</html>